---
import BaseLayout from '@/layouts/BaseLayout.astro'
import PostCard from '@/components/PostCard.astro'
import type { Frontmatter } from '@/types'

const posts = await Astro.glob<Frontmatter>('./blog/*.mdx')
const nonDraftPosts = posts
  .filter(({ frontmatter }) => !frontmatter.draft)
  .sort((a, b) => {
    const aDate = new Date(a.frontmatter.publishedAt)
    const bDate = new Date(b.frontmatter.publishedAt)
    return bDate.getTime() - aDate.getTime()
  })
---

<BaseLayout title={'Blog - NekoChan'} description='NekoChan - Full Stack Web Developer'>
  <div class='mb-16'>
    <h2 class='mb-4 text-3xl font-bold tracking-tight md:text-5xl'>Blog</h2>
    <p class='text-gray-600 dark:text-gray-300'>
      I write about web development, programming, and other stuff that I find interesting.
    </p>
  </div>
  {
    nonDraftPosts.length ? (
      nonDraftPosts.map(({ frontmatter }) => <PostCard {...frontmatter} />)
    ) : (
      <p class='text-gray-600 dark:text-gray-300'>No posts yet.</p>
    )
  }
</BaseLayout>
